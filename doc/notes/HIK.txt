A description of the HIK animation format for RealLive
------------------------------------------------------

I only have the HIK files for ALMA and Planetarian. When I say "always," I mean
it in the context of those two games.

Things to note:
- It looks like most atoms are optional? Look at ALMA's BG32_NOISE, which has 3
  records where the final two only have five properties each.
- dumphik appears to be able to read all the hik files in ALMA and planetarian
  EXCEPT ALMA's MAD_ANM.hik, which is the animation of Madoka at the end of
  ALMA'S OP. I have no idea what's going on in this file, and it may just
  invalidate all above assumptions. There appear to be multiple copies of
  several atoms. WTF.

-------------------------------------------------------------------------

Byte 0x00 through 0x08 : The integer values 10000 twice. I assume this is file
                         magic.

A sequence of key value pairs (I am not sure if these are part of the header or
the first record):

10100 : <int> (always 1 so far)
10101 : <int> (always 0 so far)
10102 : <int> (always 0 so far)
10103 : <int> <int>
      > Size of the HIK layer, probably.

(This might be part of the header or the first record--not sure. Used to think
this was the number of records below, but that's wrong. See the majority of
files in ALMA...)

20000 : <int>
      > Used to think that this was the number of records in a hik file; then I
      > didn't, and now I suspect that it is, but my definition of a record is
      > wrong. Regardless, this is 1 in ALMA's EV0703.hik (which has one layer
      > with five animated images) and 4 in planetarian's hik files (which have
      > four images composited together). Random idea: a 20001 atom is actually
      > the deliminator between records?

A record consists of a sequence of atoms which are key value pairs, described
below:

20001 : <int>
      > Usually "1". No visible differences when I tried "0" or "2".
20100 : <size of string including NULL> <NULL terminated character string>
20101 : <int> <int>
      > Appears to be an offset from the top left corner of the screen to where
      > this record's image starts. This doesn't affect the clip area.

21000 : <int>
      > Most likely a boolean to control the next couple of options. Always
      > false in Planetarian's HIK files. When I disable 21200 and enable these
      > options, the planetarian background scrolls diagonally and repeats. Is
      > this an option for backgrounds?
21001 : <int> <int> <int> <int> ; 640x480 (size of source or dest?)
21002 : <int> <int> <int> <int> <int>
21003 : <int>

21100 : <int>
      > Most likely a boolean to control 21101. Always false in Planetarian's
      > HIK files.
21101 : <int> <int> <int> <int> ; 640x480 (size of source or dest?)

21200 : <int>
      > 1 if we use the scrolling stuff from 21201 and 21202. (Maybe 21203?)
21201 : <int> <int> <int> <int>
      > Think this is the important part. The first int pair is the (x, y)
      > starting coordinate for the top left of the image (perhaps offset by
      > 20101) and the second pair is the ending (x, y).
21202 : <int> <int>
      > The first int is definitly time to xscroll. Second is time to yscroll?
21203 : <int>

21301 : <int>
      > 1 if we should use the clip area. 
21300 : <int> <int> <int> <int>
      > Defines the output clip area.

30000 : <int>
      > In EV0703.hik, this is 1. Same in Planetarian's files. When setting
      > this to 0 in EV0703.hik, nothing gets displayed. I suspect this
      > controls whether the image is outputted.
30001 : <int>

30100 : <int>
      > 1 if we should perform some sort of multiframe animation.  This is used
      > in ALMA's EV0703.hik to change between its five frames. When set to 0
      > in that file, it only displays the first image.
30101 : <int>
30102 : <int>
      > Not sure; this doesn't appear to be the time a frame should be on
      > screen; changing it to 1000 doesn't increase frame length.

40000 : <int>
      > Whether to use a source file.
40101 : 31 <int>s.
      > No idea at all.
40102 : <int>
      > Image Opacity in the range 0-255.
40103 : <int> <int>              ; 0 0
      > Some sort of offset; Weirdness happens when setting this to something
      > other than [0, 0]
40100 : <size of string including NULL> <NULL terminated character string>
      > Source g00 image

Terminated with "-1 <some number>". <some number> is 100 in all the planetarian
files. Done in all files except for MAD_ANM.hik?
