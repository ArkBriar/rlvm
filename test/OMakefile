if $(not $(defined-env VERBOSE))
  OMakeFlags(-S --progress)
  export

CXXFLAGS = --ansi -U__STRICT_ANSI__ -funsigned-char $(if $(defined-env DEBUG), -g, -O2) $(shell sdl-config --cflags) $(PLATFORMFLAGS) -I../src -D_THREAD_SAFE

.PHONY: clean

.SUBDIRS: Module_Str_SEEN Module_Mem_SEEN Module_Jmp_SEEN Module_Sys_SEEN ExpressionTest_SEEN

INCLUDES += ../src
LDFLAGS += ../src/librlvm$(EXT_LIB) $(shell sdl-config --libs)  $(shell freetype-config --libs) -lSDL_image $(PLATFORMLIBS) -lboost_filesystem

TEST_FILES[] = 
  rlvmTest
  testUtils
  Module_Jmp_TUT
  Module_Str_TUT
  Module_Mem_TUT
  Module_Sys_TUT
  ExpressionTest_TUT
  Gameexe_TUT

.DEFAULT: $(CXXProgram rlvmTest, $(TEST_FILES))
rlvmTest$(EXE): ../src/librlvm$(EXT_LIB) Module_Str_SEEN Module_Mem_SEEN Module_Jmp_SEEN

clean:
  $(RM) *.o *.gch *$(EXT_LIB) *.omc rlvmTest$(EXE) rlvmTest$(EXE).stackdump
